{% extends 'base.html.twig' %}

{% block title %}Tweet index
{% endblock %}

{% block body %}
	<section>
		<header>
			<div class="header-block">
				<div class="header-top">
					<a href="#" class="header-logo">
						<div>
							<svg xmlns="http://www.w3.org/2000/svg" version="1.0" width="340.000000pt" height="300.000000pt" viewbox="0 0 340.000000 300.000000" preserveaspectratio="xMidYMid meet">

								<g transform="translate(0.000000,300.000000) scale(0.100000,-0.100000)" fill="#ffffff" stroke="none">
									<path d="M230 1505 l0 -1465 160 0 160 0 2 1057 3 1057 385 -1057 385 -1057 111 0 111 0 20 53 c11 28 184 502 384 1052 l364 1000 3 -1053 2 -1052 425 0 425 0 0 1465 0 1465 -397 0 -398 0 -334 -876 c-184 -481 -337 -877 -341 -879 -3 -2 -157 391 -341 873 l-336 877 -396 3 -397 2 0 -1465z m935 246 l364 -905 -40 -135 c-23 -75 -44 -142 -48 -149 -6 -10 -832 2067 -831 2091 0 4 43 6 96 5 l95 -3 364 -904z m1685 -246 l0 -1155 -100 0 -100 0 0 1155 0 1155 100 0 100 0 0 -1155z"/>
								</g>
							</svg>
						</div>
					</a>
					<nav class="header-navbar">
						<div class="header-link">
							<a href="#">
								<div>
									<svg viewbox="0 0 24 24" aria-hidden="true" xmlns="http://www.w3.org/2000/svg">
										<g>
											<path d="M21.591 7.146L12.52 1.157c-.316-.21-.724-.21-1.04 0l-9.071 5.99c-.26.173-.409.456-.409.757v13.183c0 .502.418.913.929.913H9.14c.51 0 .929-.41.929-.913v-7.075h3.909v7.075c0 .502.417.913.928.913h6.165c.511 0 .929-.41.929-.913V7.904c0-.301-.158-.584-.408-.758z"></path>
										</g>
									</svg>
									<span>Accueil</span>
								</div>
							</a>
						</div>
						<div class="header-link">
							<a href="#">
								<div>
									<svg viewbox="0 0 24 24" aria-hidden="true" class="r-4qtqp9 r-yyyyoo r-dnmrzs r-bnwqim r-1plcrui r-lrvibr r-vlxjld r-lwhw9o r-cnnz9e">
										<g>
											<path d="M5.651 19h12.698c-.337-1.8-1.023-3.21-1.945-4.19C15.318 13.65 13.838 13 12 13s-3.317.65-4.404 1.81c-.922.98-1.608 2.39-1.945 4.19zm.486-5.56C7.627 11.85 9.648 11 12 11s4.373.85 5.863 2.44c1.477 1.58 2.366 3.8 2.632 6.46l.11 1.1H3.395l.11-1.1c.266-2.66 1.155-4.88 2.632-6.46zM12 4c-1.105 0-2 .9-2 2s.895 2 2 2 2-.9 2-2-.895-2-2-2zM8 6c0-2.21 1.791-4 4-4s4 1.79 4 4-1.791 4-4 4-4-1.79-4-4z"></path>
										</g>
									</svg>

									<span>Profil</span>
								</div>
							</a>
						</div>
						<div class="header-link">
							<a href="#">
								<div>
									<svg viewbox="0 0 24 24" aria-hidden="true" class="r-4qtqp9 r-yyyyoo r-dnmrzs r-bnwqim r-1plcrui r-lrvibr r-vlxjld r-lwhw9o r-cnnz9e">
										<g>
											<path d="M7.501 19.917L7.471 21H.472l.029-1.027c.184-6.618 3.736-8.977 7-8.977.963 0 1.95.212 2.87.672-.444.478-.851 1.03-1.212 1.656-.507-.204-1.054-.329-1.658-.329-2.767 0-4.57 2.223-4.938 6.004H7.56c-.023.302-.05.599-.059.917zm15.998.056L23.528 21H9.472l.029-1.027c.184-6.618 3.736-8.977 7-8.977s6.816 2.358 7 8.977zM21.437 19c-.367-3.781-2.17-6.004-4.938-6.004s-4.57 2.223-4.938 6.004h9.875zm-4.938-9c-.799 0-1.527-.279-2.116-.73-.836-.64-1.384-1.638-1.384-2.77 0-1.93 1.567-3.5 3.5-3.5s3.5 1.57 3.5 3.5c0 1.132-.548 2.13-1.384 2.77-.589.451-1.317.73-2.116.73zm-1.5-3.5c0 .827.673 1.5 1.5 1.5s1.5-.673 1.5-1.5-.673-1.5-1.5-1.5-1.5.673-1.5 1.5zM7.5 3C9.433 3 11 4.57 11 6.5S9.433 10 7.5 10 4 8.43 4 6.5 5.567 3 7.5 3zm0 2C6.673 5 6 5.673 6 6.5S6.673 8 7.5 8 9 7.327 9 6.5 8.327 5 7.5 5z"></path>
										</g>
									</svg>

									<span>Communautés</span>
								</div>
							</a>
						</div>

						<div class="header-link">
							<a href="#">
								<div>
									<svg viewbox="0 0 24 24" aria-hidden="true" class="r-4qtqp9 r-yyyyoo r-dnmrzs r-bnwqim r-1plcrui r-lrvibr r-vlxjld r-lwhw9o r-cnnz9e" xmlns="http://www.w3.org/2000/svg">
										<g>
											<path d="M1.998 5.5c0-1.381 1.119-2.5 2.5-2.5h15c1.381 0 2.5 1.119 2.5 2.5v13c0 1.381-1.119 2.5-2.5 2.5h-15c-1.381 0-2.5-1.119-2.5-2.5v-13zm2.5-.5c-.276 0-.5.224-.5.5v2.764l8 3.638 8-3.636V5.5c0-.276-.224-.5-.5-.5h-15zm15.5 5.463l-8 3.636-8-3.638V18.5c0 .276.224.5.5.5h15c.276 0 .5-.224.5-.5v-8.037z"></path>
										</g>
									</svg>
									<span>Messages</span>
								</div>
							</a>
						</div>
						<div class="header-link">
							<a href="#">
								<div>
									<svg viewbox="0 0 24 24" aria-hidden="true" class="r-4qtqp9 r-yyyyoo r-dnmrzs r-bnwqim r-1plcrui r-lrvibr r-vlxjld r-lwhw9o r-cnnz9e" xmlns="http://www.w3.org/2000/svg">
										<g>
											<path d="M3 4.5C3 3.12 4.12 2 5.5 2h13C19.88 2 21 3.12 21 4.5v15c0 1.38-1.12 2.5-2.5 2.5h-13C4.12 22 3 20.88 3 19.5v-15zM5.5 4c-.28 0-.5.22-.5.5v15c0 .28.22.5.5.5h13c.28 0 .5-.22.5-.5v-15c0-.28-.22-.5-.5-.5h-13zM16 10H8V8h8v2zm-8 2h8v2H8v-2z"></path>
										</g>
									</svg>
									<span>Portfolio</span>
								</div>
							</a>
						</div>
						<div class="header-link">
							<a href="#">
								<div>
									<svg viewbox="0 0 24 24" aria-hidden="true" class="r-4qtqp9 r-yyyyoo r-dnmrzs r-bnwqim r-1plcrui r-lrvibr r-z80fyv r-19wmn03" style="color: rgb(239, 243, 244);">
										<g>
											<path d="M10.54 1.75h2.92l1.57 2.36c.11.17.32.25.53.21l2.53-.59 2.17 2.17-.58 2.54c-.05.2.04.41.21.53l2.36 1.57v2.92l-2.36 1.57c-.17.12-.26.33-.21.53l.58 2.54-2.17 2.17-2.53-.59c-.21-.04-.42.04-.53.21l-1.57 2.36h-2.92l-1.58-2.36c-.11-.17-.32-.25-.52-.21l-2.54.59-2.17-2.17.58-2.54c.05-.2-.03-.41-.21-.53l-2.35-1.57v-2.92L4.1 8.97c.18-.12.26-.33.21-.53L3.73 5.9 5.9 3.73l2.54.59c.2.04.41-.04.52-.21l1.58-2.36zm1.07 2l-.98 1.47C10.05 6.08 9 6.5 7.99 6.27l-1.46-.34-.6.6.33 1.46c.24 1.01-.18 2.07-1.05 2.64l-1.46.98v.78l1.46.98c.87.57 1.29 1.63 1.05 2.64l-.33 1.46.6.6 1.46-.34c1.01-.23 2.06.19 2.64 1.05l.98 1.47h.78l.97-1.47c.58-.86 1.63-1.28 2.65-1.05l1.45.34.61-.6-.34-1.46c-.23-1.01.18-2.07 1.05-2.64l1.47-.98v-.78l-1.47-.98c-.87-.57-1.28-1.63-1.05-2.64l.34-1.46-.61-.6-1.45.34c-1.02.23-2.07-.19-2.65-1.05l-.97-1.47h-.78zM12 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5c.82 0 1.5-.67 1.5-1.5s-.68-1.5-1.5-1.5zM8.5 12c0-1.93 1.56-3.5 3.5-3.5 1.93 0 3.5 1.57 3.5 3.5s-1.57 3.5-3.5 3.5c-1.94 0-3.5-1.57-3.5-3.5z"></path>
										</g>
									</svg>

									<span>Paramètres</span>
								</div>
							</a>
						</div>

						<div class="header-link">
							<button>
								<span>Contacter</span>
							</button>
						</div>
					</nav>
				</div>
				{% if app.user %}
					<div class="main-profils user-profile-active" id="user-profile">

						<img src="/medias/user/{{ user.picture }}" alt="Avatar de l'utilisateur">

						<div class="header-profil">
							<div class="header-ids">
								<h6>{{ user.pseudo }}</h6>
								<p>{{ user.username }}</p>
							</div>
						</div>
						<div class="header-points">
							<svg viewbox="0 0 24 24" aria-hidden="true" class="r-4qtqp9 r-yyyyoo r-1xvli5t r-dnmrzs r-bnwqim r-1plcrui r-lrvibr r-vlxjld" xmlns="http://www.w3.org/2000/svg">
								<g>
									<path d="M3 12c0-1.1.9-2 2-2s2 .9 2 2-.9 2-2 2-2-.9-2-2zm9 2c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm7 0c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z"></path>
								</g>
							</svg>
						</div>
						<div class="bubble-logout hide">
							<div class="bubble-block">
								<a href="{{ path('app_logout') }}">
									<span>Se déconnecter de</span>
									<span>{{ user.username }}</span>

								</a>
							</div>
						</div>

					</div>
				{% endif %}
			</header>
			<main>
			<pre>
				{{ dump(userLikes) }}
			</pre>
				<div class="main-center">
					<nav class="main-navbar">
						<button class="main-portfolio">
							<span>Portfolio</span>
						</button>
						<button class="main-messages">
							<span>Messages</span>
						</button>
					</nav>
					<div class="main-message">
						<div class="main-profils">
							{% if app.user %}
								<img src="/medias/user/{{ user.picture }}" alt="Avatar de l'utilisateur">
							{% else %}
								<img src="/medias/user/user.png" alt="Avatar de l'utilisateur">
							{% endif %}
						</div>
						<div class="main-text">
							{{ include('tweet/_form.html.twig') }}
							{# <textarea name="" id="" placeholder="Partagez vos impressions ici !"></textarea>
																																																																																																																																																																																																				<div class="main-files">
																																																																																																																																																																																																					<svg viewbox="0 0 24 24" aria-hidden="true" class="r-4qtqp9 r-yyyyoo r-dnmrzs r-bnwqim r-1plcrui r-lrvibr r-z80fyv r-19wmn03" style="color: rgb(29, 155, 240);" xmlns="http://www.w3.org/2000/svg">
																																																																																																																																																																																																						<g>
																																																																																																																																																																																																							<path d="M3 5.5C3 4.119 4.119 3 5.5 3h13C19.881 3 21 4.119 21 5.5v13c0 1.381-1.119 2.5-2.5 2.5h-13C4.119 21 3 19.881 3 18.5v-13zM5.5 5c-.276 0-.5.224-.5.5v9.086l3-3 3 3 5-5 3 3V5.5c0-.276-.224-.5-.5-.5h-13zM19 15.414l-3-3-5 5-3-3-3 3V18.5c0 .276.224.5.5.5h13c.276 0 .5-.224.5-.5v-3.086zM9.75 7C8.784 7 8 7.784 8 8.75s.784 1.75 1.75 1.75 1.75-.784 1.75-1.75S10.716 7 9.75 7z"></path>
																																																																																																																																																																																																						</g>
																																																																																																																																																																																																					</svg>
																																																																																																																																																																																																					<div class="main-button">
																																																																																																																																																																																																						<span>Poster</span>
																																																																																																																																																																																																					</div>
																																																																																																																																																																																																			</div> #}
						</div>
					</div>
					<div class="main-notifications">
						<span>Voir 4 nouveaux posts</span>
					</div>

					{# --------------------------- #}
					{% for tweet in tweetsDesc %}

						<div class="main-post">
							<div class="main-picture">
								<img src="/medias/user/{{ tweet.user.picture }}" alt="Avatar de l'utilisateur">
							</div>
							<div class="main-container">
								<div class="main-title">
									<div class="main-info">
										<h5>{{ tweet.user.pseudo }}</h5>
										<p>{{ tweet.user.username }}</p>
										{% set currentDate = date() %}
										{% set tweetDate = tweet.date %}
										{% set dateDifference = currentDate.diff(tweetDate) %}
										{% set currentDateDifferenceFormat = date().diff(currentDate) %}
										{# {% set tweetDayMonth = tweet.date|date('j M') %} #}
										{% set frenchMonths = {
											1: 'janv.',
											2: 'févr.',
											3: 'mars',
											4: 'avr.',
											5: 'mai',
											6: 'juin',
											7: 'juil.',
											8: 'août',
											9: 'sept.',
											10: 'oct.',
											11: 'nov.',
											12: 'déc.'
										} %}
										{% set tweetDayMonth = tweet.date|date('j') ~ ' ' ~ frenchMonths[tweet.date|date('n')|number_format(0, 'n')] %}
										{% set tweetDayMonthYear = tweet.date|date('j') ~ ' ' ~ frenchMonths[tweet.date|date('n')|number_format(0, 'n')] ~ ' ' ~ tweet.date|date('Y') %}
										<p>·
											{% if dateDifference.s < 60 and dateDifference.i == 0 and dateDifference.h == 0 and dateDifference.d == 0 and dateDifference.m == 0 and dateDifference.y == 0 %}
												{{ dateDifference.format('%s sec') }}

											{% elseif dateDifference.i < 60 and dateDifference.h == 0 and dateDifference.d == 0 and dateDifference.m == 0 and dateDifference.y == 0 %}
												{{ dateDifference.format('%i min') }}

											{% elseif dateDifference.h < 24 and dateDifference.d == 0 and dateDifference.m == 0 and dateDifference.y == 0 %}
												{{ dateDifference.format('%hh') }}

											{% elseif dateDifference.d < 8 and dateDifference.m == 0 and dateDifference.m == 0 and dateDifference.y == 0 %}
												{{ dateDifference.format('%d j') }}

											{% elseif dateDifference.m and dateDifference.y == 0 %}
												{{tweetDayMonth}}

											{% else %}
												{{tweetDayMonthYear}}

											{% endif %}
											{# {{ dateDifference.format('%d jour %h heure %i min %s sec') }} #}
										</p>
									</div>
									<div class="main-points">
										<svg viewbox="0 0 24 24" aria-hidden="true" class="r-4qtqp9 r-yyyyoo r-1xvli5t r-dnmrzs r-bnwqim r-1plcrui r-lrvibr r-vlxjld" xmlns="http://www.w3.org/2000/svg">
											<g>
												<path d="M3 12c0-1.1.9-2 2-2s2 .9 2 2-.9 2-2 2-2-.9-2-2zm9 2c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm7 0c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z"></path>
											</g>
										</svg>
									</div>
								</div>
								<div class="main-article">
									<p>{{ tweet.content }}</p>
								</div>
								{% if tweet.media %}
									<div class="main-image">

										<img src="/medias/tweets/{{ tweet.media }}" alt="Media de l'utilisateur">
									</div>
								{% endif %}

								<div class="main-bottom">
									<div class="main-response">
										<svg viewbox="0 0 24 24" aria-hidden="true" class="r-4qtqp9 r-yyyyoo r-dnmrzs r-bnwqim r-1plcrui r-lrvibr r-1xvli5t r-1hdv0qi" xmlns="http://www.w3.org/2000/svg">
											<g>
												<path d="M1.751 10c0-4.42 3.584-8 8.005-8h4.366c4.49 0 8.129 3.64 8.129 8.13 0 2.96-1.607 5.68-4.196 7.11l-8.054 4.46v-3.69h-.067c-4.49.1-8.183-3.51-8.183-8.01zm8.005-6c-3.317 0-6.005 2.69-6.005 6 0 3.37 2.77 6.08 6.138 6.01l.351-.01h1.761v2.3l5.087-2.81c1.951-1.08 3.163-3.13 3.163-5.36 0-3.39-2.744-6.13-6.129-6.13H9.756z"></path>
											</g>
										</svg>
										<div class="main-number">
											22
										</div>
									</div>
									<div class="main-response">
										<a href="{{ path('app_likes_new', {'id_user': tweet.user.id, 'id_tweet': tweet.id}) }}">

											<svg width="20" height="19" viewbox="0 0 20 19" fill="none" xmlns="http://www.w3.org/2000/svg" id="likes">
												<path d="M14.697 2.5C13.475 2.44 12.018 3.01 10.807 4.66L10.002 5.75L9.196 4.66C7.984 3.01 6.526 2.44 5.304 2.5C4.061 2.57 2.955 3.28 2.394 4.41C1.842 5.53 1.761 7.19 2.873 9.23C3.947 11.2 6.13 13.5 10.002 15.84C13.872 13.5 16.054 11.2 17.128 9.23C18.239 7.19 18.158 5.53 17.605 4.41C17.044 3.28 15.939 2.57 14.697 2.5ZM18.884 10.19C17.533 12.67 14.883 15.31 10.505 17.86L10.002 18.16L9.498 17.86C5.119 15.31 2.469 12.67 1.116 10.19C-0.244 7.69 -0.294 5.33 0.602 3.52C1.489 1.73 3.249 0.61 5.203 0.51C6.854 0.42 8.571 1.07 10.001 2.52C11.43 1.07 13.147 0.42 14.797 0.51C16.751 0.61 18.511 1.73 19.398 3.52C20.294 5.33 20.244 7.69 18.884 10.19Z" fill="#f91880"/>

												<path d="M9 3L10 4L11 3L12 2L13 1.5H14H15H16L17 2L18 3L18.5 4L19 5V6V7V8L18.5 9L18 10L17 11L16 12L15 13L14 14L13 15L12 16L11 17L10 17.5L9 17L8 16L7 15L6 14L5 13L4 12L3 11L2 10L1.5 9L1 8V7V6V5L1.5 4L2 3L3 2L4 1.5H5H6H7L8 2L9 3Z" fill="#f91880"/>
											</svg>


										</a>

										<div class="main-number">


											{% for tweetLikes in likesCounts %}
												{% if tweetLikes.id == tweet.id %}
													{{ tweetLikes.likeCount }}
												{% endif %}
											{% endfor %}


										</div>
									</div>
									<div class="main-response">
										<svg viewbox="0 0 24 24" aria-hidden="true" class="r-4qtqp9 r-yyyyoo r-dnmrzs r-bnwqim r-1plcrui r-lrvibr r-1xvli5t r-1hdv0qi" xmlns="http://www.w3.org/2000/svg">
											<g>
												<path d="M8.75 21V3h2v18h-2zM18 21V8.5h2V21h-2zM4 21l.004-10h2L6 21H4zm9.248 0v-7h2v7h-2z"></path>
											</g>
										</svg>
										<div class="main-number">
											801
										</div>
									</div>
								</div>
							</div>
						</div>
					{% endfor %}


					{# -------------------------------------------- #}
				</div>
			</div>
			<div class="main-side">
				<div class="main-block">
					{% if app.user == null %}
						<div class="main-subscribe">

							<div class="main-subtitle">
								<h2>Vous êtes nouveau ?</h3>
							</div>
							<div class="main-invitation">
								<p>Inscrivez-vous pour profiter des fonctionnalités du portfolio et débloquer le badge des membres !</p>
							</div>
							<div class="main-register">
								<button>
									<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 48 48" class="LgbsSe-Bz112c">
										<g>
											<path fill="#EA4335" d="M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"></path>
											<path fill="#4285F4" d="M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"></path>
											<path fill="#FBBC05" d="M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"></path>
											<path fill="#34A853" d="M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"></path>
											<path fill="none" d="M0 0h48v48H0z"></path>
										</g>
									</svg>
									S'inscrire avec Google
								</button>
								<button>
									<svg viewbox="0 0 24 24" aria-hidden="true" class="r-4qtqp9 r-yyyyoo r-dnmrzs r-bnwqim r-1plcrui r-lrvibr r-1d4mawv r-z80fyv r-19wmn03" style="color: rgb(15, 20, 25);">
										<g>
											<path d="M16.365 1.43c0 1.14-.493 2.27-1.177 3.08-.744.9-1.99 1.57-2.987 1.57-.12 0-.23-.02-.3-.03-.01-.06-.04-.22-.04-.39 0-1.15.572-2.27 1.206-2.98.804-.94 2.142-1.64 3.248-1.68.03.13.05.28.05.43zm4.565 15.71c-.03.07-.463 1.58-1.518 3.12-.945 1.34-1.94 2.71-3.43 2.71-1.517 0-1.9-.88-3.63-.88-1.698 0-2.302.91-3.67.91-1.377 0-2.332-1.26-3.428-2.8-1.287-1.82-2.323-4.63-2.323-7.28 0-4.28 2.797-6.55 5.552-6.55 1.448 0 2.675.95 3.6.95.865 0 2.222-1.01 3.902-1.01.613 0 2.886.06 4.374 2.19-.13.09-2.383 1.37-2.383 4.19 0 3.26 2.854 4.42 2.955 4.45z"></path>
										</g>
									</svg>
									S'inscrire avec Apple
								</button>
								<button>Créer un compte</button>
							</div>
							<div class="main-terms">
								<p>En vous inscrivant, vous acceptez les
									<a href="#">Conditions d'utilisation</a>
									et la
									<a href="#">Politique de confidentialité</a>, notamment l'<a href="#">Utilisation des cookies</a>.</p>
							</div>
						</div>
					{% endif %}
					<div class="main-member">
						<div class="main-members">
							<h2>Membres</h2>
						</div>
						{% for user in lastThreeUsers %}
							<div class="main-profils">
								<img src="/medias/user/{{ user.picture }}" alt="Avatar de l'utilisateur">
								<div class="main-ids">
									<h6>{{ user.pseudo }}</h6>
									<p>{{ user.username }}</p>
								</div>
							</div>
						{% endfor %}
						<div class="main-profils">
							<a href="#">
								<span>Voir plus</span>
							</a>
						</div>
					</div>
				</div>
			</div>
		</main>
	</section>
{% endblock %}
